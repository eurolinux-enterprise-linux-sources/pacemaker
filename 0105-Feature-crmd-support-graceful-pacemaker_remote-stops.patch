From 8eebc8a30a55645164d3c41acaf028dd75fab275 Mon Sep 17 00:00:00 2001
From: Ken Gaillot <kgaillot@redhat.com>
Date: Wed, 23 Dec 2015 15:18:38 -0600
Subject: [PATCH 105/105] Feature: crmd: support graceful pacemaker_remote
 stops

NOT YET IMPLEMENTED. This just is a placeholder.
---
 crmd/lrm_state.c | 7 +++++++
 1 file changed, 7 insertions(+)

diff --git a/crmd/lrm_state.c b/crmd/lrm_state.c
index 497d3f9..5ee5b83 100644
--- a/crmd/lrm_state.c
+++ b/crmd/lrm_state.c
@@ -478,6 +478,13 @@ remote_proxy_cb(lrmd_t *lrmd, void *userdata, xmlNode *msg)
     CRM_CHECK(op != NULL, return);
     CRM_CHECK(session != NULL, return);
 
+    if (safe_str_eq(op, LRMD_IPC_OP_SHUTDOWN_REQ)) {
+        crm_warn("Graceful proxy shutdown not yet supported");
+        /* TODO: uncomment this, then put node in standby: */
+        /* remote_proxy_ack_shutdown(lrmd); */
+        return;
+    }
+
     crm_element_value_int(msg, F_LRMD_IPC_MSG_ID, &msg_id);
 
     /* This is msg from remote ipc client going to real ipc server */
-- 
1.8.3.1

